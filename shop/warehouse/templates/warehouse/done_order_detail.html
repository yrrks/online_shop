{% extends "warehouse/base_warehouse.html" %}
{% load static %}

{% block title %}–ó–∞–∫–∞–∑ #{{ order.id }} - –î–µ—Ç–∞–ª–∏{% endblock %}





{% block content %}
<link href="{% static 'warehouse/css/done_order_detail.css' %}" rel="stylesheet">
<div class="done-order-detail-container">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="order-header">
        <div>
            <h1>–ó–∞–∫–∞–∑ #{{ order.id }}</h1>
            <div class="order-meta">
                <span class="status-badge status-done">‚úÖ –°–æ–±—Ä–∞–Ω</span>
                <span class="order-date">–°–æ–∑–¥–∞–Ω: {{ order.created|date:"d.m.Y H:i" }}</span>
            </div>
        </div>
        <a href="{% url 'warehouse:orders_done' %}" class="btn btn-outline">
            ‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É
        </a>
    </div>

    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ -->
    <div class="order-info-sections">
        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–µ -->
        <div class="info-card">
            <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–µ</h3>
            <div class="info-grid">
                <div class="info-row">
                    <span class="info-label">–ò–º—è:</span>
                    <span class="info-value">{{ order.first_name }} {{ order.last_name }}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Email:</span>
                    <span class="info-value">{{ order.email }}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">–¢–µ–ª–µ—Ñ–æ–Ω:</span>
                    <span class="info-value">{{ order.phone|default:"–ù–µ —É–∫–∞–∑–∞–Ω" }}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">–ê–¥—Ä–µ—Å:</span>
                    <span class="info-value">{{ order.address }}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">–ì–æ—Ä–æ–¥:</span>
                    <span class="info-value">{{ order.city }}, {{ order.postal_code }}</span>
                </div>
            </div>
        </div>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–±–æ—Ä–∫–µ -->
        <div class="info-card">
            <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–±–æ—Ä–∫–µ</h3>
            <div class="info-grid">
                <div class="info-row">
                    <span class="info-label">–°—Ç–∞—Ç—É—Å:</span>
                    <span class="info-value">‚úÖ –°–æ–±—Ä–∞–Ω</span>
                </div>
                <div class="info-row">
                    <span class="info-label">–°–±–æ—Ä—â–∏–∫:</span>
                    <span class="info-value">{{ order.order.picker.username|default:"–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω" }}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">–î–∞—Ç–∞ —Å–±–æ—Ä–∫–∏:</span>
                    <span class="info-value">{{ order.order.picked|date:"d.m.Y H:i"|default:"-" }}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">–ö–æ–ª-–≤–æ –ø–æ–∑–∏—Ü–∏–π:</span>
                    <span class="info-value">{{ order.items.count }} —à—Ç.</span>
                </div>
                <div class="info-row">
                    <span class="info-label">–û–±—â–∞—è —Å—É–º–º–∞:</span>
                    <span class="info-value price">{{ order.get_global_cost|default:0 }} ‚ÇΩ</span>
                </div>
            </div>
        </div>
    </div>

    <!-- –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ -->
    <div class="items-section">
        <h3>–°–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞</h3>

        <div class="table-header">
            <div></div>
            <div>–¢–æ–≤–∞—Ä</div>
            <div>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</div>
            <div>–¶–µ–Ω–∞</div>
            <div>–°—É–º–º–∞</div>
        </div>

        {% for item in order.items.all %}
        <div class="item-row">
            <div class="item-image">
                {% if item.product.image %}
                    <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}">
                {% else %}
                    <div class="no-image">üì¶</div>
                {% endif %}
            </div>
            <div>
                <div class="item-name">{{ item.product.name }}</div>
                <div class="item-category">{{ item.product.category }}</div>
            </div>
            <div class="item-quantity">{{ item.quantity }} —à—Ç.</div>
            <div class="item-price">{{ item.price }} ‚ÇΩ</div>
            <div class="item-total">{{ item.get_cost }} ‚ÇΩ</div>
        </div>
        {% endfor %}

        <!-- –ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ -->
        <div class="order-total">
            <strong class="total-amount">–ò—Ç–æ–≥–æ: {{ order.get_global_cost|default:0 }} ‚ÇΩ</strong>
        </div>
    </div>
</div>
{% endblock %}