{% extends "warehouse/base_warehouse.html" %}
{% load static %}

{% block title %}–ú–æ–∏ –∑–∞–∫–∞–∑—ã{% endblock %}




{% block content %}
<link href="{% static 'warehouse/css/worker_stat.css' %}" rel="stylesheet">
<div class="worker-stat-container">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="stat-header">
        <h1>üì¶ –ú–æ–∏ –∑–∞–∫–∞–∑—ã</h1>
        <p class="stat-subtitle">–í—Å–µ –∑–∞–∫–∞–∑—ã, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –Ω–∞ –º–µ–Ω—è</p>
    </div>

    <!-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="total-stats">
        <div class="total-number">{{ orders.count }}</div>
        <div class="total-label">–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤</div>
    </div>

    <!-- –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ -->
    <div class="orders-section">
        <div class="section-header">
            <h3>–°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤</h3>
            <small>–û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è</small>
        </div>

        {% if orders %}
        <div class="orders-table">
            <div class="table-header">
                <div>‚Ññ</div>
                <div>–°—Ç–∞—Ç—É—Å</div>
                <div>–ö–ª–∏–µ–Ω—Ç</div>
                <div>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</div>
                <div>–î–∞—Ç–∞ —Å–±–æ—Ä–∫–∏</div>
                <div>–°—É–º–º–∞</div>
                <div>–î–µ–π—Å—Ç–≤–∏—è</div>
            </div>

            {% for order in orders %}
            <div class="order-row">
                <div class="order-number">#{{ order.id }}</div>
                <div class="order-status status-{{ order.order.status }}">
                    {{ order.order.get_status_display }}
                </div>
                <div class="order-client">{{ order.first_name }} {{ order.last_name }}</div>
                <div class="order-date">{{ order.created|date:"d.m.Y H:i" }}</div>
                <div class="order-picked">
                    {% if order.order.picked %}
                        {{ order.order.picked|date:"d.m.Y H:i" }}
                    {% else %}
                        -
                    {% endif %}
                </div>
                <div class="order-amount">{{ order.get_global_cost|default:0 }} ‚ÇΩ</div>
                <div class="order-actions">
                    {% if order.order.status == 'done' %}
                    <a href="{% url 'warehouse:done_order_detail' order.id %}" class="btn btn-secondary">
                        –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                    </a>
                    {% else %}
                    <a href="{% url 'warehouse:order_detail' order.id %}" class="btn btn-secondary">
                        –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                    </a>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="empty-state">
            <div class="empty-icon">üì≠</div>
            <h3>–ó–∞–∫–∞–∑—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
            <p>–ù–∞ –≤–∞—Å –µ—â–µ –Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω—ã –∑–∞–∫–∞–∑—ã</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}