{% extends "product/base.html" %}
{% load static %}

{% block title %}Избранное{% endblock %}

{% block content %}
<link href="{% static 'wishlist/css/wishlist.css' %}" rel="stylesheet">

<div class="wishlist-container">
    <h1 class="category-header">Избранное</h1>

    {% if wishlist_products %}
    <div class="wishlist-products">
        {% for product in wishlist_products %}
        <div class="product-card" id="product-{{ product.id }}">
            <!-- Добавлен контейнер для изображения -->
            <div class="product-image-container">
                <a href="{{ product.get_absolute_url }}">
                    {% if product.image %}
                        <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-image">
                    {% else %}
                        <img src="{% static 'img/no_image.png' %}" alt="No image" class="product-image">
                    {% endif %}
                </a>
            </div>

            <!-- Изменен класс на product-content -->
            <div class="product-content">
                <h3 class="product-title">
                    <a href="{{ product.get_absolute_url }}">{{ product.name }}</a>
                </h3>
                <p class="product-price">{{ product.price }} Р</p>

                <!-- Добавлена секция с действиями -->
                <div class="product-actions">
                    <button class="btn-remove" data-product-id="{{ product.id }}">
                        Удалить из избранного
                    </button>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-wishlist">
        <p>В избранном пока нет товаров</p>
        <a href="{% url 'product:product_list' %}" class="btn btn-primary">Перейти к товарам</a>
    </div>
    {% endif %}
</div>

<script>
// JavaScript для удаления из избранного
document.addEventListener('DOMContentLoaded', function() {
    const removeButtons = document.querySelectorAll('.btn-remove');

    removeButtons.forEach(button => {
        button.addEventListener('click', function() {
            const productId = this.getAttribute('data-product-id');
            // Здесь должна быть логика удаления из избранного
            console.log('Удалить товар:', productId);

            // Временная реализация - просто скрываем карточку
            const productCard = document.getElementById(`product-${productId}`);
            if (productCard) {
                productCard.style.display = 'none';
            }
        });
    });
});
</script>
{% endblock %}